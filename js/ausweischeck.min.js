/* Ausweis Check Javascript Library
*  Version: 0.0.1
*  Copyright: 2018 Deniz Celebi / Pixelart
*  Licensed under MIT License
*/
class AusweisCheck{constructor(ausweisnummer){this.nummer=ausweisnummer.toUpperCase();this.alphas={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,"A":10,"B":11,"C":12,"D":13,"E":14,"F":15,"G":16,"H":17,"I":18,"J":19,"K":20,"L":21,"M":22,"N":23,"O":24,"P":25,"Q":26,"R":27,"S":28,"T":29,"U":30,"V":31,"W":32,"X":33,"Y":34,"Z":35}}
get checkPerso(){if(this.nummer.length<10){return!1}
var prufziffer=this.nummer.substr(9);var personummer=this.nummer.substr(0,9);var arr=personummer.split('');var iter=7;var arr_zahlen=[];var endziffern=0;for(var i=0;i<arr.length;i++){if(iter==7){var result=parseInt(this.alphas[arr[i]])*iter;arr_zahlen.push(result);iter=3}else if(iter==3){var result=parseInt(this.alphas[arr[i]])*iter;arr_zahlen.push(result);iter=1}else if(iter==1){var result=parseInt(this.alphas[arr[i]])*iter;arr_zahlen.push(result);iter=7}}
for(i=0;i<9;i++){var val=String(arr_zahlen[i]);var temp=val.substr(val.length-1);endziffern+=parseInt(temp)}
var ende=endziffern%10;if(ende==prufziffer){var resarr={"result":!0,"ausweisnummer":personummer,"type":"Personalausweis"}
return resarr}else{var resarr={"result":!1,"error":"Pr端fsumme stimmt nicht 端berein"}
return resarr}}
get checkReisepass(){if(this.nummer.length<11){return!1}
var passnummer=this.nummer.substring(0,9);var prufziffer=this.nummer.charAt(9);var nation=this.nummer.substring(10);var arr=passnummer.split('');var iter=7;var arr_zahlen=[];var endziffern=0;for(var i=0;i<arr.length;i++){if(iter==7){var result=parseInt(this.alphas[arr[i]])*iter;arr_zahlen.push(result);iter=3}else if(iter==3){var result=parseInt(this.alphas[arr[i]])*iter;arr_zahlen.push(result);iter=1}else if(iter==1){var result=parseInt(this.alphas[arr[i]])*iter;arr_zahlen.push(result);iter=7}}
for(i=0;i<9;i++){var val=String(arr_zahlen[i]);var temp=val.substr(val.length-1);endziffern+=parseInt(temp)}
var ende=endziffern%10;if(ende==prufziffer){var resarr={"result":!0,"ausweisnummer":passnummer,"type":"Reisepass","nation":nation}
return resarr}else{var resarr={"result":!1,"error":"Pr端fsumme stimmt nicht 端berein"}
return resarr}}}
